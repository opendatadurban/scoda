/*! For license information please see 1862.js.LICENSE.txt */
"use strict";(self.webpackChunkocl_bb_library=self.webpackChunkocl_bb_library||[]).push([[1862],{91862:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});var n=r(67294),o=r(50450),a=r(78648);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===i(o)?o:String(o)),n)}var o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(d,e);var t,r,o,a,i=(o=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(a){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=i.call(this,e)).loadMap=t.loadMap.bind(s(t)),t}return t=d,(r=[{key:"componentDidMount",value:function(){if(this.props.data.length>0){var e=L.DomUtil.get("map");null!=e&&(e._leaflet_id=null),this.loadMap()}}},{key:"componentDidUpdate",value:function(){if(0!==this.props.data.length){var e=L.DomUtil.get("map");null!=e&&(e._leaflet_id=null),this.loadMap()}}},{key:"loadMap",value:function(){var e,t=L.map("map").setView([-26.195246,28.034088],10);try{L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{maxZoom:19,attribution:'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a>'}).addTo(t)}catch(e){}var r=L.control();r.onAdd=function(e){return this._div=L.DomUtil.create("div"),this._div.setAttribute("id","infoDiv"),this.update(),this._div},r.update=function(e){var t=document.getElementById("infoDiv");t&&(t.classList.add("info"),t.innerHTML="<h4>Demographic Model Data</h4>"+(e?"<b>"+e.name+"</b><br />Migration Value for <b>"+e.year+"</b>: "+e.density+"<br />Flow Value: "+e.flow:"Hover over a region"))},r.addTo(t);var n=this.props.data.features;e=L.geoJson(n,{style:function(e){var t=e.properties.flow;return{weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.7,fillColor:t>5e3?"#b2182b":t>2500?"#d6604d":t>1e3?"#f4a582":t>500?"#fddbc7":t>0?"#f7f7f7":t>-500?"#d1e5f0":t>-1e3?"#92c5de":t>-2500?"#4393c3":t>-5e3?"#2166ac":"#053061"}},onEachFeature:function(n,o){o.on({mouseover:function(e){var t=e.target;t.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront(),r.update(t.feature.properties)},mouseout:function(t){e.resetStyle(t.target),r.update()},click:function(e){t.fitBounds(e.target.getBounds())}})}}).addTo(t),t.fitBounds(e.getBounds());var o=L.control({position:"bottomright"});o.onAdd=function(e){var t=document.getElementById("legend");if(t)return t;var r,n,o=L.DomUtil.create("div"),a=[-5e3,-2500,-1e3,-500,0,500,1e3,2500,5e3],i=[];o.setAttribute("id","legend");for(var c=0;c<a.length;c++){n=a[c+1];var l=(r=a[c])+1,u=l>5e3?"#b2182b":l>2500?"#d6604d":l>1e3?"#f4a582":l>500?"#fddbc7":l>0?"#f7f7f7":l>-500?"#d1e5f0":l>-1e3?"#92c5de":l>-2500?"#4393c3":l>-5e3?"#2166ac":"#053061";i.push('<i style="background:'+u+';padding: 1px 10px; margin-right:2px;"></i>  '+r+(n?"&ndash;"+n:"+"))}return o.innerHTML=i.join("<br>"),o},o.addTo(t),document.getElementById("legend").classList.add("info"),document.getElementById("legend").classList.add("legend")}},{key:"style",value:function(e){return{weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.7,fillColor:this.getMapColor(e.properties.flow)}}},{key:"getMapColor",value:function(e){return e>5e3?"#b2182b":e>2500?"#d6604d":e>1e3?"#f4a582":e>500?"#fddbc7":e>0?"#f7f7f7":e>-500?"#d1e5f0":e>-1e3?"#92c5de":e>-2500?"#4393c3":e>-5e3?"#2166ac":"#053061"}},{key:"highlightFeature",value:function(e){var t=e.target;t.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront(),info1.update(t.feature.properties)}},{key:"resetHighlight",value:function(e){geojson.resetStyle(e.target),info1.update()}},{key:"zoomToFeature",value:function(e){map1.fitBounds(e.target.getBounds())}},{key:"onEachFeature",value:function(e,t){t.on({mouseover:this.highlightFeature,mouseout:this.resetHighlight,click:this.zoomToFeature})}},{key:"render",value:function(){return n.createElement("div",null,n.createElement("div",{id:"map"}))}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(n.Component);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(o);if(a){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).download=t.download.bind(v(t)),t}return t=c,(r=[{key:"renderDataSet",value:function(e){if("map"===e)return n.createElement(d,{data:this.props.results})}},{key:"download",value:function(){this.props.downloadEvent()}},{key:"render",value:function(){return n.createElement("div",{className:"dm-box-card"},n.createElement("div",{className:"dm-box-card-header"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col ml-3"},this.props.resultTitle),n.createElement("div",{className:"col-0 mt-2 mr-4 float-right"},n.createElement("div",{className:"ie-button-download",onClick:this.download},"Download")))),n.createElement("div",{className:"col p-0"},n.createElement("div",{className:""},this.renderDataSet(this.props.resultType))))}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function S(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(c,e);var t,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(o);if(a){var r=_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).state={selectedCity:"Pretoria"},t.rebind=t.rebind.bind(j(t)),t}return t=c,(r=[{key:"componentDidMount",value:function(){document.getElementById("year-selector").selectedIndex=1}},{key:"rebind",value:function(){var e=document.getElementById("city-selector").value,t=document.getElementById("year-selector").value,r=document.getElementById("ward-selector").value;this.props.dataBindEvent(t,e,r)}},{key:"render",value:function(){var e=this.props.yearOptions.map((function(e,t){return n.createElement("option",{key:t,value:e[0]},e[1])})),t=this.props.cityOptions.map((function(e,t){return n.createElement("option",{key:t,value:e[0]},e[1])})),r=this.props.wardOptions.map((function(e,t){return n.createElement("option",{key:t,value:e[0]},e[1])}));return n.createElement("div",{className:"ie-box-card"},n.createElement("div",{className:"dm-box-card-header"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col ml-3"},"Area Selector"))),n.createElement("div",{className:"col-0 pt-2 pl-1 pr-1"},n.createElement("div",{className:"ie-box-results mtp-2 ml-2 mr-2"},n.createElement("div",{className:"ie-element-label-small"},"Year:"),n.createElement("select",{id:"year-selector",className:"pl-3 mt-2 mr-2 dm-dropdown-small"},e))),n.createElement("div",{className:"col mt-3 ml-2 mr-2 mt-3 ie-small-border dm-line-width"}),n.createElement("div",{className:"col-0 pt-2 pl-1 pr-1"},n.createElement("div",{className:"ie-box-results mtp-2 ml-2 mr-2"},n.createElement("div",{className:"ie-element-label-small"},"City:"),n.createElement("select",{id:"city-selector",className:"pl-3 mt-2 mr-2 dm-dropdown-small"},t))),n.createElement("div",{className:"col mt-3 ml-2 mr-2 Smt-3 ie-small-border dm-line-width"}),n.createElement("div",{className:"col-0 pt-2 pl-1 pr-1"},n.createElement("div",{className:"ie-box-results mtp-2 ml-2 mr-2"},n.createElement("div",{className:"ie-element-label-small"},"Ward:"),n.createElement("select",{id:"ward-selector",className:"pl-3 mt-2 mr-2 dm-dropdown-small"},r))),n.createElement("div",{className:"col-0 mt-3"},n.createElement("div",{className:"col-0 offset-md-3"},n.createElement("div",{id:"button-search",className:"ie-button-search",onClick:this.rebind},"Submit"))),n.createElement("div",{className:"row mt-3"}))}}])&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component),x=r(19755),N=r.n(x),k=r(19192);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===T(o)?o:String(o)),n)}var o}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function B(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(c,e);var t,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(o);if(a){var r=M(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return B(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).state={chartHeight:"310px"},t.download=t.download.bind(C(t)),t}return t=c,(r=[{key:"componentDidMount",value:function(){this.props.table.length>0&&this.loadGoogleVizApi(this.props.table,this.props.max)}},{key:"componentDidUpdate",value:function(){0!=this.props.table.length&&this.loadGoogleVizApi(this.props.table,this.props.max)}},{key:"loadGoogleVizApi",value:function(e,t){N().ajax({dataType:"script",cache:!0,url:"https://www.google.com/jsapi"}).done((function(){google.load("visualization","1",{packages:["controls","bar","corechart","geochart","line"],callback:function(){var r=google.visualization.arrayToDataTable(e),n={curveType:"function",legend:{position:"none"},chartArea:{top:"10%"},lineWidth:5,tooltip:{isHtml:!0},hAxis:{gridlines:{count:4}},axes:{y:{all:{range:{max:t,min:0}}}},colors:["#BD0026"]},o=new google.charts.Line(document.getElementById("timechart"));o.draw(r,google.charts.Line.convertOptions(n)),google.visualization.events.addListener(o,"ready",(function(e){var t=document.getElementById("timechart").children[0].children[0].children[0].outerHTML,r=document.querySelector("canvas"),n=r.getContext("2d");k.ZP.fromString(n,t).start();var o=r.toDataURL("image/png");document.getElementById("timeChartPng").value=o}))}})}))}},{key:"download",value:function(){this.props.downloadEvent()}},{key:"render",value:function(){return n.createElement("div",{className:"ie-box-card mt-4 mb-0"},n.createElement("div",{className:"dm-box-card-header"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col ml-3"},this.props.title),n.createElement("div",{className:"col-0 mt-2 mr-4 float-right"},n.createElement("div",{className:"ie-button-download",onClick:this.download},"Download")))),n.createElement("div",{className:"col-0 pt-2 pl-2 pr-1"},n.createElement("canvas",{style:{display:"none"}}),n.createElement("div",{id:"timechart",style:{height:this.state.chartHeight}}),n.createElement("input",{type:"hidden",id:"timeChartPng"})),n.createElement("div",{className:"row mt-3"}))}}])&&D(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function F(){F=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),c=new _(o||[]);return n(i,"_invoke",{value:E(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var y={};l(y,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(P([])));v&&v!==t&&r.call(v,a)&&(y=v);var b=m.prototype=d.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==I(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),l(b,c,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function z(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function G(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){z(a,n,o,i,c,"next",e)}function c(e){z(a,n,o,i,c,"throw",e)}i(void 0)}))}}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===I(o)?o:String(o)),n)}var o}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function V(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(d,e);var t,r,i,c,l,u,s,f=(u=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Z(u);if(s){var r=Z(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return V(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=f.call(this,e)).state={dataset:[],years:[1,"1996"],cities:[1,"Johannesburg"],wards:[1,"Ward 1"],table:[],geometries:[],max:1,region:1,ward:"None"},t.loadData=t.loadData.bind(W(t)),t.toggleModal=t.toggleModal.bind(W(t)),t.showLoader=t.showLoader.bind(W(t)),t.hideLoader=t.hideLoader.bind(W(t)),t.rebind=t.rebind.bind(W(t)),t.downloadMapData=t.downloadMapData.bind(W(t)),t}return t=d,r=[{key:"componentDidMount",value:(l=G(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"loadData",value:(c=G(F().mark((function e(){var t,r=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoader(),e.next=3,a.Z.get("/api/demographics").catch((function(e){r.hideLoader(),r.setState({modal:!0,toggle:!0})}));case 3:t=e.sent;try{t?(this.setState({dataset:t.data}),this.setState({years:t.data.form_year}),this.setState({cities:t.data.form_city}),this.setState({wards:t.data.form_ward}),this.setState({table:t.data.table1}),this.setState({max:t.data.max1}),this.setState({region:t.data.region1}),this.setState({geometries:t.data.geometries1})):(this.setState({dataset:[]}),this.setState({years:[1,"1996"]}),this.setState({cities:[1,"Johannesburg"]}),this.setState({wards:[1,"Ward 1"]}),this.setState({table:[]}),this.setState({max:1}),this.setState({region:1}),this.setState({geometries:[]})),this.hideLoader()}catch(e){this.hideLoader()}case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"rebind",value:(i=G(F().mark((function e(t,r,n){var o,i,c=this;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showLoader(),o={city_ward_code:n,region_id:r,year:t},""===n&&(n="None"),this.setState({region:r,ward:n}),e.next=6,(0,a.Z)({method:"post",url:"/api/demographics",data:o,headers:{"Content-Type":"application/json"}}).catch((function(e){c.hideLoader(),c.setState({modal:!0,toggle:!0})}));case 6:i=e.sent;try{i?(this.setState({dataset:i.data}),this.setState({table:i.data.table1}),this.setState({max:i.data.max1}),this.setState({region:i.data.region1}),this.setState({geometries:i.data.geometries1})):(this.setState({dataset:[]}),this.setState({table:[]}),this.setState({max:1}),this.setState({region:1}),this.setState({geometries:[]})),this.hideLoader()}catch(e){this.hideLoader()}case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"toggleModal",value:function(){this.state.modal?this.setState({modal:!1}):this.setState({modal:!0})}},{key:"showLoader",value:function(){this.setState({loader:!0})}},{key:"hideLoader",value:function(){this.setState({loader:!1})}},{key:"downloadMapData",value:function(){this.props.downloadMapEvent(this.state.region,this.state.ward)}},{key:"render",value:function(){var e=n.createElement("i",{className:"modal-close fa fa-times","aria-hidden":"true",onClick:this.toggleModal});return n.createElement("div",{className:"demographic-card"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-12"},n.createElement("div",{className:"ie-content-card"},n.createElement("div",{className:"col "},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-4"},n.createElement(P,{yearOptions:this.state.years,cityOptions:this.state.cities,wardOptions:this.state.wards,dataBindEvent:this.rebind}),n.createElement(A,{title:"Time Series",table:this.state.table,max:this.state.max,downloadEvent:this.props.downloadEvent})),n.createElement("div",{className:"col"},n.createElement(g,{resultTitle:"Geographic Representation",results:this.state.geometries,downloadEvent:this.downloadMapData,resultType:"map"}))))))),n.createElement(o.u_,{isOpen:this.state.modal,toggle:this.toggleModal,modalclassname:"fade"},n.createElement(o.xB,{toggle:this.toggleModal,modalclassname:"modal-header",close:e},n.createElement("i",{className:"fa fa-exclamation-triangle","aria-hidden":"true"}),"Â Server Error"),n.createElement(o.fe,{className:"modal-body"},n.createElement("br",null),"There is currently no data available for the selected indicator!",n.createElement("br",null),n.createElement("br",null))),n.createElement(o.u_,{isOpen:this.state.loader,className:"modal-dialog-centered loader"},n.createElement(o.fe,null,n.createElement("div",{className:"row"},n.createElement("div",{className:"col-2"}),n.createElement("div",{className:"col-0 ml-3 pt-4"},n.createElement(o.$j,{type:"grow",color:"secondary",size:"sm"}),n.createElement(o.$j,{type:"grow",color:"success",size:"sm"}),n.createElement(o.$j,{type:"grow",color:"danger",size:"sm"}),n.createElement(o.$j,{type:"grow",color:"warning",size:"sm"})),n.createElement("div",{className:"col-0 pt-4 pl-4 float-left"},"Loading Content...")),n.createElement("br",null))))}}],r&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(n.Component);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==J(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===J(o)?o:String(o)),n)}var o}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function K(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(c,e);var t,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(o);if(a){var r=Q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return K(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(r=[{key:"render",value:function(){return n.createElement("div",{className:"mt-1 "},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-12"},n.createElement("div",{className:"ie-content-card ie-content-card-footer"},n.createElement("div",{className:"col"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12"},n.createElement("a",{className:"dm-footer-button-white ",href:this.props.report,target:"_blank"},"Download Methodology"))))))))}}])&&Y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ee(o)?o:String(o)),n)}var o}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function ne(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(c,e);var t,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(o);if(a){var r=ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ne(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).downloadMethodology=t.downloadMethodology.bind(oe(t)),t.downloadTimeChart=t.downloadTimeChart.bind(oe(t)),t.downloadMapData=t.downloadMapData.bind(oe(t)),t}return t=c,(r=[{key:"downloadMapData",value:function(e,t){var r="/demographics/"+e+"/"+t+"/download";this.downloadData(r,"demographics.csv")}},{key:"downloadTimeChart",value:function(){var e=document.getElementById("timeChartPng").value;this.downloadData(e,"chart.png")}},{key:"downloadMethodology",value:function(){this.downloadData("/static/dist/data/report.pdf","report.pdf")}},{key:"downloadData",value:function(e,t){var r=document.createElement("a");r.download=t,r.href=e,r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"render",value:function(){return n.createElement("div",{className:"container pb-5"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-12"},n.createElement($,{downloadEvent:this.downloadTimeChart,downloadMapEvent:this.downloadMapData}))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-12"},n.createElement(X,{report:"/static/dist/data/report.pdf"}))))}}])&&te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component)}}]);